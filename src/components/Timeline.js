import React, { useEffect } from "react";
import gsap, {CustomEase} from 'gsap';
import { useInView } from 'react-intersection-observer'

const Timeline = () => {
    const animationDuration = .5
    const animationEase = "expo.out"

    const [begin,beginInView] = useInView({
        triggerOnce: true,
        threshold: .3
    })
    const [study,studyInView] = useInView({
        triggerOnce: true,
        threshold: .3
    })
    const [firstWork,firstWorkInView] = useInView({
        triggerOnce: true,
        threshold: .2
    })
    const [freelance,freelanceInView] = useInView({
        triggerOnce: true,
        threshold: .3
    })

    useEffect(()=>{
        if(beginInView){
            const beginTimeline = gsap.timeline({ paused: false })
            beginTimeline.to('#circle-1', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#logo-1', {
                opacity: 1,
                duration: animationDuration,
                ease:animationEase
            })
        }
        if(studyInView){
            const studyTimeline = gsap.timeline({ paused: false })
            studyTimeline.to('#path-1', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#circle-2', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#logo-2', {
                opacity: 1,
                duration: animationDuration,
                ease:animationEase
            })
        }
        if(firstWorkInView){
            const firstWorkTimeline = gsap.timeline({ paused: false })
            firstWorkTimeline.to('#path-2', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#circle-3', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#logo-3', {
                opacity: 1,
                duration: animationDuration,
                ease:animationEase
            })
        }
        if(freelanceInView){
            const freelanceTimeline = gsap.timeline({ paused: false })
            freelanceTimeline.to('#path-3', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#circle-4', {
                strokeDashoffset: 0,
                duration: animationDuration,
                ease:animationEase
            })
            .to('#logo-4', {
                opacity: 1,
                duration: animationDuration,
                ease:animationEase
            })
        }
    })

    return(
        <section className="timeline container" id='journey'>
            <div className='title-wrapper'>
                <h2 className='title-with-decoration'>Mon parcours</h2>
                <hr className="separator"/>
            </div>
            <div className="timeline-wrapper">
                <svg width="121" height="1358" viewBox="0 0 121 1358" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M60 118V412" stroke="#2C2C2C" stroke-width="13"/>
                    <path id='path-1' className='animated' d="M60 118V412" stroke="#FC8166" stroke-width="13" pathLength="1"/>
                    <path className='animated' d="M60 530V824" stroke="#FC8166" stroke-width="13" pathLength="1"/>
                    <path d="M60 532V826" stroke="#2C2C2C" stroke-width="13"/>
                    <path id='path-2' className='animated' d="M60 531V825" stroke="#FC8166" stroke-width="13" pathLength="1"/>
                    <path d="M60 944V1238" stroke="#2C2C2C" stroke-width="13"/>
                    <path id='path-3' className='animated' d="M60 945V1239" stroke="#FC8166" stroke-width="13" pathLength="1"/>
                    <circle cx="60.5" cy="884.5" r="58.5" fill="#D9D9D9" fill-opacity="0.17" stroke="#2C2C2C" stroke-width="4"/>
                    <path d="M77.5 865H74.75C74.1698 862.179 72.6346 859.643 70.4031 857.822C68.1717 856 65.3805 855.004 62.5 855H57.5C54.6195 855.004 51.8283 856 49.5969 857.822C47.3655 859.643 45.8302 862.179 45.25 865H42.5C39.186 865.004 36.0089 866.322 33.6655 868.666C31.3222 871.009 30.004 874.186 30 877.5V902.5C30.004 905.814 31.3222 908.991 33.6655 911.334C36.0089 913.678 39.186 914.996 42.5 915H77.5C80.814 914.996 83.9911 913.678 86.3345 911.334C88.6778 908.991 89.996 905.814 90 902.5V877.5C89.996 874.186 88.6778 871.009 86.3345 868.666C83.9911 866.322 80.814 865.004 77.5 865V865ZM57.5 860H62.5C64.0457 860.006 65.5516 860.49 66.8117 861.385C68.0719 862.28 69.0248 863.543 69.54 865H50.46C50.9752 863.543 51.9281 862.28 53.1883 861.385C54.4484 860.49 55.9543 860.006 57.5 860V860ZM42.5 870H77.5C79.4891 870 81.3968 870.79 82.8033 872.197C84.2098 873.603 85 875.511 85 877.5V885H35V877.5C35 875.511 35.7902 873.603 37.1967 872.197C38.6032 870.79 40.5109 870 42.5 870V870ZM77.5 910H42.5C40.5109 910 38.6032 909.21 37.1967 907.803C35.7902 906.397 35 904.489 35 902.5V890H57.5V892.5C57.5 893.163 57.7634 893.799 58.2322 894.268C58.7011 894.737 59.337 895 60 895C60.663 895 61.2989 894.737 61.7678 894.268C62.2366 893.799 62.5 893.163 62.5 892.5V890H85V902.5C85 904.489 84.2098 906.397 82.8033 907.803C81.3968 909.21 79.4891 910 77.5 910Z" fill="#656565"/>
                    <circle cx="60.5" cy="1297.5" r="58.5" fill="#D9D9D9" fill-opacity="0.17" stroke="#2C2C2C" stroke-width="4"/>
                    <circle id='circle-4' className='animated' cx="60.5" cy="1297.5" r="58.5" stroke="#FC8166" stroke-width="4" pathLength="1"/>
                    <circle id='circle-3'  className='animated' cx="60.5" cy="884.5" r="58.5" stroke="#FC8166" stroke-width="4" pathLength="1"/>
                    <path d="M77.5 1278H74.75C74.1698 1275.18 72.6346 1272.64 70.4031 1270.82C68.1717 1269 65.3805 1268 62.5 1268H57.5C54.6195 1268 51.8283 1269 49.5969 1270.82C47.3655 1272.64 45.8302 1275.18 45.25 1278H42.5C39.186 1278 36.0089 1279.32 33.6655 1281.67C31.3222 1284.01 30.004 1287.19 30 1290.5V1315.5C30.004 1318.81 31.3222 1321.99 33.6655 1324.33C36.0089 1326.68 39.186 1328 42.5 1328H77.5C80.814 1328 83.9911 1326.68 86.3345 1324.33C88.6778 1321.99 89.996 1318.81 90 1315.5V1290.5C89.996 1287.19 88.6778 1284.01 86.3345 1281.67C83.9911 1279.32 80.814 1278 77.5 1278V1278ZM57.5 1273H62.5C64.0457 1273.01 65.5516 1273.49 66.8117 1274.39C68.0719 1275.28 69.0248 1276.54 69.54 1278H50.46C50.9752 1276.54 51.9281 1275.28 53.1883 1274.39C54.4484 1273.49 55.9543 1273.01 57.5 1273V1273ZM42.5 1283H77.5C79.4891 1283 81.3968 1283.79 82.8033 1285.2C84.2098 1286.6 85 1288.51 85 1290.5V1298H35V1290.5C35 1288.51 35.7902 1286.6 37.1967 1285.2C38.6032 1283.79 40.5109 1283 42.5 1283V1283ZM77.5 1323H42.5C40.5109 1323 38.6032 1322.21 37.1967 1320.8C35.7902 1319.4 35 1317.49 35 1315.5V1303H57.5V1305.5C57.5 1306.16 57.7634 1306.8 58.2322 1307.27C58.7011 1307.74 59.337 1308 60 1308C60.663 1308 61.2989 1307.74 61.7678 1307.27C62.2366 1306.8 62.5 1306.16 62.5 1305.5V1303H85V1315.5C85 1317.49 84.2098 1319.4 82.8033 1320.8C81.3968 1322.21 79.4891 1323 77.5 1323Z" fill="#656565"/>
                    <path id='logo-3' className='timeline-logo' d="M77.5 865H74.75C74.1698 862.179 72.6346 859.643 70.4031 857.822C68.1717 856 65.3805 855.004 62.5 855H57.5C54.6195 855.004 51.8283 856 49.5969 857.822C47.3655 859.643 45.8302 862.179 45.25 865H42.5C39.186 865.004 36.0089 866.322 33.6655 868.666C31.3222 871.009 30.004 874.186 30 877.5V902.5C30.004 905.814 31.3222 908.991 33.6655 911.334C36.0089 913.678 39.186 914.996 42.5 915H77.5C80.814 914.996 83.9911 913.678 86.3345 911.334C88.6778 908.991 89.996 905.814 90 902.5V877.5C89.996 874.186 88.6778 871.009 86.3345 868.666C83.9911 866.322 80.814 865.004 77.5 865V865ZM57.5 860H62.5C64.0457 860.006 65.5516 860.49 66.8117 861.385C68.0719 862.28 69.0248 863.543 69.54 865H50.46C50.9752 863.543 51.9281 862.28 53.1883 861.385C54.4484 860.49 55.9543 860.006 57.5 860V860ZM42.5 870H77.5C79.4891 870 81.3968 870.79 82.8033 872.197C84.2098 873.603 85 875.511 85 877.5V885H35V877.5C35 875.511 35.7902 873.603 37.1967 872.197C38.6032 870.79 40.5109 870 42.5 870V870ZM77.5 910H42.5C40.5109 910 38.6032 909.21 37.1967 907.803C35.7902 906.397 35 904.489 35 902.5V890H57.5V892.5C57.5 893.163 57.7634 893.799 58.2322 894.268C58.7011 894.737 59.337 895 60 895C60.663 895 61.2989 894.737 61.7678 894.268C62.2366 893.799 62.5 893.163 62.5 892.5V890H85V902.5C85 904.489 84.2098 906.397 82.8033 907.803C81.3968 909.21 79.4891 910 77.5 910Z" fill="#FC8166"/>
                    <path id='logo-4' className='timeline-logo' d="M77.5 1278H74.75C74.1698 1275.18 72.6346 1272.64 70.4031 1270.82C68.1717 1269 65.3805 1268 62.5 1268H57.5C54.6195 1268 51.8283 1269 49.5969 1270.82C47.3655 1272.64 45.8302 1275.18 45.25 1278H42.5C39.186 1278 36.0089 1279.32 33.6655 1281.67C31.3222 1284.01 30.004 1287.19 30 1290.5V1315.5C30.004 1318.81 31.3222 1321.99 33.6655 1324.33C36.0089 1326.68 39.186 1328 42.5 1328H77.5C80.814 1328 83.9911 1326.68 86.3345 1324.33C88.6778 1321.99 89.996 1318.81 90 1315.5V1290.5C89.996 1287.19 88.6778 1284.01 86.3345 1281.67C83.9911 1279.32 80.814 1278 77.5 1278V1278ZM57.5 1273H62.5C64.0457 1273.01 65.5516 1273.49 66.8117 1274.39C68.0719 1275.28 69.0248 1276.54 69.54 1278H50.46C50.9752 1276.54 51.9281 1275.28 53.1883 1274.39C54.4484 1273.49 55.9543 1273.01 57.5 1273V1273ZM42.5 1283H77.5C79.4891 1283 81.3968 1283.79 82.8033 1285.2C84.2098 1286.6 85 1288.51 85 1290.5V1298H35V1290.5C35 1288.51 35.7902 1286.6 37.1967 1285.2C38.6032 1283.79 40.5109 1283 42.5 1283V1283ZM77.5 1323H42.5C40.5109 1323 38.6032 1322.21 37.1967 1320.8C35.7902 1319.4 35 1317.49 35 1315.5V1303H57.5V1305.5C57.5 1306.16 57.7634 1306.8 58.2322 1307.27C58.7011 1307.74 59.337 1308 60 1308C60.663 1308 61.2989 1307.74 61.7678 1307.27C62.2366 1306.8 62.5 1306.16 62.5 1305.5V1303H85V1315.5C85 1317.49 84.2098 1319.4 82.8033 1320.8C81.3968 1322.21 79.4891 1323 77.5 1323Z" fill="#FC8166"/>
                    <circle cx="60.5" cy="471.5" r="58.5" fill="#D9D9D9" fill-opacity="0.17" stroke="#2C2C2C" stroke-width="4"/>
                    <path d="M85.1424 452.585L66.7079 443.015C62.65 440.373 57.5993 440.326 53.5007 442.892L34.8588 452.585C34.7888 452.623 34.7163 452.664 34.6488 452.708C30.2248 455.464 28.689 461.607 31.2185 466.429C32.076 468.063 33.3372 469.402 34.8588 470.294L40.0012 472.964V486.313C40.0042 492.282 43.5684 497.556 48.7984 499.33C52.4381 500.477 56.212 501.039 60.0007 500.997C63.7888 501.044 67.5627 500.487 71.2029 499.344C76.433 497.57 79.9972 492.296 80.0002 486.327V472.958L85.0001 470.354V492.824C85.0001 494.329 86.1194 495.548 87.5 495.548C88.8807 495.548 89.9999 494.329 89.9999 492.824V460.132C90.0166 456.933 87.6986 453.977 85.1424 452.585ZM75.0002 486.327C75.0015 489.897 72.8757 493.055 69.7503 494.126C66.5809 495.113 63.2966 495.592 60.0006 495.549C56.7045 495.592 53.4202 495.113 50.2508 494.126C47.1254 493.055 44.9997 489.897 45.001 486.327V475.56L53.2933 479.864C55.3393 481.189 57.6761 481.884 60.0556 481.878C62.3206 481.895 64.5474 481.242 66.498 479.987L75.0002 475.56V486.327ZM83 465.376L64.1455 475.184C61.5166 476.852 58.258 476.805 55.6707 475.061L37.2237 465.499C35.1674 464.29 34.3994 461.494 35.5082 459.254C35.8832 458.496 36.4454 457.868 37.1312 457.44L55.8682 447.687C58.4979 446.022 61.7547 446.069 64.343 447.809L82.7775 457.38C84.1332 458.201 84.9814 459.75 84.9999 461.439C85.0024 463.04 84.246 464.529 83 465.376Z" fill="#656565"/>
                    <path id='logo-2' className='timeline-logo' d="M85.1424 452.585L66.7079 443.015C62.65 440.373 57.5993 440.326 53.5007 442.892L34.8588 452.585C34.7888 452.623 34.7163 452.664 34.6488 452.708C30.2248 455.464 28.689 461.607 31.2185 466.429C32.076 468.063 33.3372 469.402 34.8588 470.294L40.0012 472.964V486.313C40.0042 492.282 43.5684 497.556 48.7984 499.33C52.4381 500.477 56.212 501.039 60.0007 500.997C63.7888 501.044 67.5627 500.487 71.2029 499.344C76.433 497.57 79.9972 492.296 80.0002 486.327V472.958L85.0001 470.354V492.824C85.0001 494.329 86.1194 495.548 87.5 495.548C88.8807 495.548 89.9999 494.329 89.9999 492.824V460.132C90.0166 456.933 87.6986 453.977 85.1424 452.585ZM75.0002 486.327C75.0015 489.897 72.8757 493.055 69.7503 494.126C66.5809 495.113 63.2966 495.592 60.0006 495.549C56.7045 495.592 53.4202 495.113 50.2508 494.126C47.1254 493.055 44.9997 489.897 45.001 486.327V475.56L53.2933 479.864C55.3393 481.189 57.6761 481.884 60.0556 481.878C62.3206 481.895 64.5474 481.242 66.498 479.987L75.0002 475.56V486.327ZM83 465.376L64.1455 475.184C61.5166 476.852 58.258 476.805 55.6707 475.061L37.2237 465.499C35.1674 464.29 34.3994 461.494 35.5082 459.254C35.8832 458.496 36.4454 457.868 37.1312 457.44L55.8682 447.687C58.4979 446.022 61.7547 446.069 64.343 447.809L82.7775 457.38C84.1332 458.201 84.9814 459.75 84.9999 461.439C85.0024 463.04 84.246 464.529 83 465.376Z" fill="#FC8166"/>
                    <circle cx="60.5" cy="60.5" r="58.5" fill="#D9D9D9" fill-opacity="0.17" stroke="#2C2C2C" stroke-width="4"/>
                    <circle id='circle-1' className='animated' cx="60.5" cy="60.5" r="58.5" stroke="#FC8166" stroke-width="4" pathLength="1"/>
                    <circle id='circle-2' className='animated' cx="60.5" cy="471.5" r="58.5" stroke="#FC8166" stroke-width="4" pathLength="1"/>
                    <path d="M87.8025 53.6326L68.84 34.6563C66.4931 32.3148 63.3142 31 60 31C56.6858 31 53.5069 32.3148 51.16 34.6563L32.1975 53.6326C31.4986 54.3275 30.9445 55.1543 30.5672 56.065C30.19 56.9758 29.9972 57.9524 30 58.9383V83.4955C30 85.4858 30.7902 87.3946 32.1967 88.802C33.6032 90.2094 35.5109 91 37.5 91H82.5C84.4891 91 86.3967 90.2094 87.8033 88.802C89.2098 87.3946 90 85.4858 90 83.4955V58.9383C90.0028 57.9524 89.81 56.9758 89.4328 56.065C89.0555 55.1543 88.5014 54.3275 87.8025 53.6326V53.6326ZM67.5 85.997H52.5V76.1561C52.5 74.1658 53.2902 72.257 54.6967 70.8496C56.1032 69.4423 58.0109 68.6516 60 68.6516C61.9891 68.6516 63.8968 69.4423 65.3033 70.8496C66.7098 72.257 67.5 74.1658 67.5 76.1561V85.997ZM85 83.4955C85 84.1589 84.7366 84.7952 84.2677 85.2643C83.7989 85.7335 83.163 85.997 82.5 85.997H72.5V76.1561C72.5 72.8389 71.183 69.6576 68.8388 67.312C66.4946 64.9664 63.3152 63.6486 60 63.6486C56.6848 63.6486 53.5054 64.9664 51.1612 67.312C48.817 69.6576 47.5 72.8389 47.5 76.1561V85.997H37.5C36.837 85.997 36.2011 85.7335 35.7323 85.2643C35.2634 84.7952 35 84.1589 35 83.4955V58.9383C35.0023 58.2753 35.2655 57.64 35.7325 57.1697L54.695 38.2009C56.1043 36.7974 58.0117 36.0094 60 36.0094C61.9883 36.0094 63.8957 36.7974 65.305 38.2009L84.2675 57.1772C84.7327 57.6456 84.9957 58.278 85 58.9383V83.4955Z" fill="#656565"/>
                    <path id='logo-1' className='timeline-logo' d="M87.8025 53.6326L68.84 34.6563C66.4931 32.3148 63.3142 31 60 31C56.6858 31 53.5069 32.3148 51.16 34.6563L32.1975 53.6326C31.4986 54.3275 30.9445 55.1543 30.5672 56.065C30.19 56.9758 29.9972 57.9524 30 58.9383V83.4955C30 85.4858 30.7902 87.3946 32.1967 88.802C33.6032 90.2094 35.5109 91 37.5 91H82.5C84.4891 91 86.3967 90.2094 87.8033 88.802C89.2098 87.3946 90 85.4858 90 83.4955V58.9383C90.0028 57.9524 89.81 56.9758 89.4328 56.065C89.0555 55.1543 88.5014 54.3275 87.8025 53.6326V53.6326ZM67.5 85.997H52.5V76.1561C52.5 74.1658 53.2902 72.257 54.6967 70.8496C56.1032 69.4423 58.0109 68.6516 60 68.6516C61.9891 68.6516 63.8968 69.4423 65.3033 70.8496C66.7098 72.257 67.5 74.1658 67.5 76.1561V85.997ZM85 83.4955C85 84.1589 84.7366 84.7952 84.2677 85.2643C83.7989 85.7335 83.163 85.997 82.5 85.997H72.5V76.1561C72.5 72.8389 71.183 69.6576 68.8388 67.312C66.4946 64.9664 63.3152 63.6486 60 63.6486C56.6848 63.6486 53.5054 64.9664 51.1612 67.312C48.817 69.6576 47.5 72.8389 47.5 76.1561V85.997H37.5C36.837 85.997 36.2011 85.7335 35.7323 85.2643C35.2634 84.7952 35 84.1589 35 83.4955V58.9383C35.0023 58.2753 35.2655 57.64 35.7325 57.1697L54.695 38.2009C56.1043 36.7974 58.0117 36.0094 60 36.0094C61.9883 36.0094 63.8957 36.7974 65.305 38.2009L84.2675 57.1772C84.7327 57.6456 84.9957 58.278 85 58.9383V83.4955Z" fill="#FC8166"/>
                </svg>
                <ul className="timeline-list">
                    <li ref={begin} id='begin'>
                        <h2 className="timeline-title">Programmation autodidacte</h2>
                        <span className="timeline-subtitle"></span>
                        <span className="timeline-date">Mars 2020 - Novembre 2020</span>
                        <p className="timeline-paragraphe"></p>
                    </li>
                    <li ref={study} id='study'>
                        <h2 className="timeline-title">TP - Développeur web et web mobile</h2>
                        <span className="timeline-subtitle">CEFIM - Tours</span>
                        <span className="timeline-date">Novembre 2020 - Novembre 2021</span>
                        <p className="timeline-paragraphe"></p>
                    </li>
                    <li ref={firstWork} id='first-work'>
                        <h2 className="timeline-title">Développeur web</h2>
                        <span className="timeline-subtitle">Ackwa - Tours</span>
                        <span className="timeline-date">Juin 2021 - Juillet 2022</span>
                        <p className="timeline-paragraphe">Dévelopement/maintenance de solutions/site web sur les CMS et Wordpress. Passage de version sur applications PHP Symfony Evaluations des projets et veille technique.
                        Accompagnement des clients</p>
                    </li>
                    <li ref={freelance} id='freelance'>
                        <h2 className="timeline-title">Développeur web Freelance</h2>
                        <span className="timeline-subtitle">Tours - Remote</span>
                        <span className="timeline-date">Juillet 2022 - Aujourd&apos;hui</span>
                        <p className="timeline-paragraphe">Ecrivons la suite ensemble</p>
                    </li>
                </ul>
            </div>
        </section>
        
    )
}

export default Timeline;